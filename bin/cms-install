#!/usr/bin/env php
<?php

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

set_time_limit(0);

require_once __DIR__ . '/config.php';

$basepath = (PHP_OS == 'WINNT') ? __DIR__ . '/../' : __DIR__ . '/../../../../../';
$basepath = realpath($basepath);

require_once $basepath . '/symfony/symfony/src/Symfony/Component/ClassLoader/UniversalClassLoader.php';
require_once $basepath . '/propel/propel1/runtime/lib/Propel.php';
require_once $basepath . '/propel/propel1/runtime/lib/connection/PropelPDO.php';
require_once $basepath . '/.composer/autoload.php';

use AlphaLemon\AlphaLemonCmsBundle\Core\Installer\Installer;

$installer = new Installer($basepath);
$installer->install($companyName, $bundleName, $dsn, $database, $user, $password, $driver);

echo "\n\nInstallation completed! To start up with AlphaLemonCMS you can:\n\n";
echo "Open your browser at http://localhost to browse your website\n";
echo "Open your browser at http://localhost/alcms.php/backend/en/index to edit your website\n";
echo "Open your browser at http://localhost/alcms_dev.php/backend/en/index to edit your website in debug mode\n";
echo "\nDon't forget to fix permissions before starting\n\n";